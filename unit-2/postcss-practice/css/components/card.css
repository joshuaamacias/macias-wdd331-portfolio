/**
 * Card Component
 * A responsive card that adapts to its container size using container queries.
 * Uses @supports for progressive enhancement with fallbacks.
 */

/* ============================================================
   BASE / FALLBACK STYLES (WORK EVERYWHERE)
   These styles apply in all browsers, even without
   container queries or CSS nesting support.
   Cards remain stacked vertically.
============================================================ */

.card-container .card {
  background-color: var(--bg-clr);
  border: 1px solid var(--table-border-clr);
  border-radius: var(--radius-med);
  padding: var(--spacing-med);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.card-container .card-image {
  width: 100%;
  height: auto;
  border-radius: var(--radius-sm);
  object-fit: cover;
}

.card-container .card-title {
  font-size: var(--font-size-med);
  font-weight: 700;
  color: var(--text-clr);
}

.card-container .card-description {
  font-size: var(--font-size-med);
  color: var(--text-clr);
  line-height: var(--line-height-med);
}

/* ------------------------------------------------------------
   FALLBACK HOVER EFFECT (NO CSS NESTING REQUIRED)
   This ensures hover behavior works in all browsers.
------------------------------------------------------------ */

.card-container .card:hover {
  transform: translateY(-2px);
}

/* ============================================================
   MODERN FEATURE #1: CSS NESTING
   Uses native CSS nesting if supported.
   Wrapped in @supports with a fallback above.
============================================================ */

@supports (selector(&)) {
  .card-container {
    .card {
      background-color: var(--bg-clr);
      border: 1px solid var(--table-border-clr);
      border-radius: var(--radius-med);
      padding: var(--spacing-med);
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);

      /* Nested hover state (enhanced version) */
      &:hover {
        transform: translateY(-2px);
      }

      .card-image {
        width: 100%;
        height: auto;
        border-radius: var(--radius-sm);
        object-fit: cover;
      }

      .card-title {
        font-size: var(--font-size-med);
        font-weight: 700;
        color: var(--text-clr);
      }

      .card-description {
        font-size: var(--font-size-med);
        color: var(--text-clr);
        line-height: var(--line-height-med);
      }
    }
  }
}

/* ============================================================
   MODERN FEATURE #2: CONTAINER QUERIES
   Progressive enhancement using @supports
============================================================ */

/* ------------------------------------------------------------
   SET UP THE CARD CONTAINER
   - container-type: inline-size tracks width
   - container-name allows explicit querying
------------------------------------------------------------ */

@supports (container-type: inline-size) {
  .card-container {
    container-type: inline-size;
    container-name: card;
  }

  /* ----------------------------------------------------------
     CONTAINER QUERY AT 400px
     When the container reaches 400px:
     - Card switches to horizontal layout
     - Image gets fixed width and does not shrink
  ---------------------------------------------------------- */

  @container card (min-width: 400px) {
    .card-container .card {
      flex-direction: row;
      align-items: flex-start;
    }

    .card-container .card-image {
      width: 200px;
      flex-shrink: 0;
      height: auto;
    }
  }
}
